= Rapport d'apprentissage Master 1 - Informatique: Supervision open-source d'un système d'information
Thomas Calatayud <thomas.calatayud@etud.univ-angers.fr>
2016-2017
:description: Projet d'alternance de Master réalisé par {author}
:icons: font
:source-highlighter: coderay
:coderay-linemus-mode: inline
:toc: preamble
:toc-title: Table des matières
:toclevels: 3
////
Pour enlever le toc en pdf
ifdef::backend-pdf[]
:toc!:
endif::[]
////

[.text-center]
Rapport rédigé par Thomas CALATAYUD +
Étudiant en Master Informatique à l'université d'Angers +
 +
 +
 +

[cols="<.^,>.^", frame="none", grid="rows"]
|===
|Responsable de stage +
M. Frédéric LARDEUX +
Enseignant chercheur +
LERIA, Université d'Angers +
frederic.lardeux@univ-angers.fr

|Tuteur en entreprise +
M. Denis PITHON +
Responsable de l'unité système de production +
Département de Maine et Loire +
d.pithon@maine-et-loire.fr
|===

== Remerciements

////
à rédiger
////

<<<

toc::[]

<<<

== Introduction

Apprentissage Master 1 Info, offre du CD49, intitulé du projet
- Pourquoi l'apprentissage ?
- Centre d'interets (techniques, humains, ...)
- Le sujet du CD49 : la supervision

<<<

== I - Le conseil départemental de Maine-et-Loire

=== Présentation du conseil départemental

(Voir notes de la réunion d'accueil)
Qu'est ce que c'est ? Qu'est ce qu'il fait , Organisation ? (élus, administration teritoriale, directions, services ...)
- Une collectivité territoriale
- Missions/compétences
- Organisation

image:Images/Organigramme-CG.JPG[]

<<<

- La DLSI : qu'est ce qu'on fait ?
    - Les différents services
    - L'unité système de production

image:Images/Organigramme-DLSI.jpg[]

<<<

=== L'unité Système de Production et ses missions

L'unité système de production travaille au sein de la DLSI du Conseil
Départemental de Maine-et-Loire sur les problématiques liées au stockage, à la
sauvegarde, à la virtualisation et à la supervision des matériels et
applications cotés serveurs, ainsi qu'a l'administration des systèmes Linux et
Windows.

Quoi ? missions ? chiffres ?
-> Stockage
-> Sauvegarde/restauration
-> Virtualisation
-> Administration système et bases de données
-> Gestion des profils/boite mail
-> SUPERVISION

image:Images/Organigramme-SPISP.jpg[]

<<<

==== La Supervision

https://www.monitoring-fr.org/supervision/

La supervision est une fonction permettant d'indiquer, controler, commander l'état d'un système ou d'un réseau. Les outils de supervision remontent des informations techniques et fonctionnelles du système d'information. Le tout dans un but de détection et de traitement automatique.

==== Présentation de l'outil Nagios

Supervision de serveurs, services, BD, environnement (Température, Luminosité, clim), équipement,...

image::Images/nagios4.jpg[link="https://www.digitalocean.com/community/tutorials/how-to-install-nagios-4-and-monitor-your-servers-on-ubuntu-14-04"]

<<<

=== Etude et mise en place d'une solution libre/open-source de supervision

Actuellement, la supervision de l'ensemble du système d'information est opérée par Nagios. Cette solution,
en place depuis près de 10 ans, contrôle un peu plus de 2700 points de
fonctionnement du SI (espaces disques, sites webs, bases de données,
consommations CPU, RAM ...).

[NOTE]
.Quelques éléments d'information concernant le système d'information : 
====
Virtualisation sur oVirt (Linux/KVM)

* ~ 365 VMs (55% Linux, 45% Windows) réparties sur 42 serveurs physiques

* la moitié de ces VMs servent les applications métiers des 2500 agents

* Stockage NAS (NFS et CIFS) répliqué sur deux salles

* 14 To consommés pour les VMs

* 15 To consommés pour la bureautique

* Supervision avec Nagios
====

.*Il m'est demandé dans le cadre de mon apprentissage de :*
. Identifier et comparer les solutions libres/open-sources de supervision
. Préconiser la solution la plus adaptée aux besoins de l'unité
. Mettre en place la solution de supervision retenue

<<<

=== Mon activité au sein de l'unité

- Montée en puissance technique, nécéssité de me mettre à niveau, de gagner en compétences, ... pour pouvoir être à l'aise et gagner en autonomie.

- Déploiement, découverte, installation et configuration de l'outil Nagios

- Script de synchronisation

- SAEIR, installation des baies de stockage et de serveurs. Déplacement dans les salles.

<<<

== II - Identification des solutions libres/open-sources de supervision

- Problématique :
    - Solution vieillisante
    - Problème de maintenance
    - mise à jour ardue (BSD, versions, ...)

=== Instantanné des solutions libres/open-sources.

Premier critère : Libre/Open-source

- Inventaire exhaustif

- Donner les différents types de solutions

- Les protocoles utilisés

- Les types de configuration

- Remontée des alertes

- ...

Pour trouver une nouvelle solution de supervision adapté au besoin de l'unité, il est nécéssaire de connâitre les enjeux de la supervision, de connaître les solutions existante sur le marché et ce qu'elles proposent.

Inventaire le plus exhaustif possible, recherche et exploration la plus complète possible et la plus "naïve" possible, avec un regard neuf sur la supervision. En explicant pourquoi je fais ça. Pourquoi je n'utilise pas de cahier des charges.

-> apparitions des premiers critères évidents ( snmp, plugins, alertes, ... ), éliminations des solutions qui sont vraiment pas adaptés, premier filtrage.

<<<

=== Etablir les critères de sélection

- Identifier le domaine à superviser (sur le nagios)

- Lister les sondes

- Croiser les éléments ressorti lors de l'inventaire

- Drésser la liste des critères

Comment je les ai établi (recherche plus poussée sur les solutions les plus intéressantes, études des sondes sur le nagios actuel), pourquoi ils sont nécéssaires, à quoi ils servent, catégorisation, listes avec explication et appréciations, ...

<<<

=== Présentation des solutions sélectionnées

Présentation des 2 solutions : carte d'identité des solutions

==== Solution 1

==== Solution 2

== Bilan

Synthèse et ouverture
Dire ce que j'ai fais durant cette première année, le déroulement. (Missions annexes)
Mon ressenti ce que j'ai apporté, ce qu'on m'a apporté

<<<

== Annexes

<<<

== Table des illustrations

<<<

== Sources

<<<

////
== Tâches éffectuées

====
* [x] Monté en puissance sur l'administration système et remise à niveau. _Dans le but de gagner en autonomie._
    - [x] installation et configuration complète de mon poste de travail
    - [x] disque virtuel
    - [x] inotify
    - [x] serveur apache
* [x] Création de VM (via ovirt) et configuration de serveur.
* [x] Découverte et prise en main avec création et configuration de nagios.
* [x] Projet de réplication de nagios.
    - [x] script shell
    - [x] inosync
* [x] Projet saeir, nouvelle salle avec création d'un ovirt suivi de la mise en place de son nagios.
* [x] Intervention Lavoisier montage des baies de stockage.
* [x] Recherche des outils de supervision
    - [x] link:../recherches/documentation.html[Documentation]
    - [x] link:../recherches/inventoring.html[Inventaire]
* [x] Etude du système Nagios actuellement installé.
    - [x] Reconnaissance des hotes et services supervisés
    - [x] Liste des sondes, checks installés (link:../nagios-2/config.html[Configuration])
* [x] Etude des solutions envisageables
    - [x] Identification des critères de sélection (link:../recherches/criteres.html[Critères])
    - [x] Tableau comparatif des solutions/critères (link:../recherches/comparatif.html[Comparatif])
* [ ] Proposition des solutions envisageable
* [ ] Etude des solutions sélectionnées
* [ ] Mise en place de la solution retenue
====
////
